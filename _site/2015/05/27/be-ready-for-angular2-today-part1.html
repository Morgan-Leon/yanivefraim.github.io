<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Be ready for Angular 2 Today - part 1</title>
  <meta name="description" content="" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="canonical" href="http://yanivefraim.github.io//2015/05/27/be-ready-for-angular2-today-part1.html">

  <link rel="shortcut icon" href="/assets/images/favicon.ico">
<!--  <link rel="stylesheet" href=""> -->
  <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://yanivefraim.github.io/" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/logo.png)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="article-image">
          <div class="post-image-image" style="background-image: url(/assets/images/board_2.jpg)">
            Article Image
          </div>
          <div class="post-meta">
            <h1 class="post-title">Be ready for Angular 2 Today - part 1</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Yaniv Efraim</h4>
              on
              <time datetime="2015-05-27 17:34">27 May 2015</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
            <div style="text-align:center">
              <a href="#topofpage" class="topofpage"><i class="fa fa-angle-down"></i></a>
            </div>
          </div>
        </div>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>Angular 2 is not here. It will take pretty long time until we&#39;ll start using it. But, as you probably heard, the changes are <a href="http://shmck.com/comparing-angular-1-x-2-0/">HUGE</a>.</p>

<p>This is a good enough reason to start preparing for Angular 2 today (otherwise the migration path will be paintfull). </p>

<blockquote>
<p>Another important point: a lot of new projects do not use Angular because of the fear of the new Angular 2 (or, &quot;why should I start a new project using Angular 1.x when soon I&#39;ll have to go through a paintfull migration path?&quot;)</p>
</blockquote>

<p>So, what do we need to do today in order to make the migration to Angular 2 easier? 
I summed it up to three steps, from the most important and complicated to the easiest:</p>

<ol>
<li>Use Component based Architecture</li>
<li>Write Angular 1.x in ES6/Typescript</li>
<li>Use the &quot;new router&quot;</li>
</ol>

<p>In this post (part 1) I will be focusing on the first bullet, &quot;Use Component based Architecture&quot;.</p>

<h2>Using Component based Architecture</h2>

<p>This is the most important part, and the hardest one. 
Angular 2.x, similar to React, is based on components. It uses <a href="http://victorsavkin.com/post/118372404541/the-core-concepts-of-angular-2">component structure hierarchy</a>. Angular 1.x does not work that way. The easiest way to understand this is through an example. I will use the <a href="https://docs.angularjs.org/tutorial">phonecat demo</a> as an example. Take a look at this code:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container-fluid&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-2&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!--Sidebar content--&gt;</span>
      Search: <span class="nt">&lt;input</span> <span class="na">ng-model=</span><span class="s">&quot;query&quot;</span><span class="nt">&gt;</span>
      Sort by:
      <span class="nt">&lt;select</span> <span class="na">ng-model=</span><span class="s">&quot;orderProp&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Alphabetical<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;age&quot;</span><span class="nt">&gt;</span>Newest<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;/select&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-10&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!--Body content--&gt;</span>
      <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;phones&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;phone in phones | filter:query | orderBy:orderProp&quot;</span>
            <span class="na">class=</span><span class="s">&quot;thumbnail phone-listing&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/phones/&quot;</span> <span class="na">class=</span><span class="s">&quot;thumb&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">ng-src=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/phones/&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
          <span class="nt">&lt;p&gt;&lt;/p&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>In order to make this code Angular 2.x ready (and more reusable), we will have to:</p>

<ol>
<li>Break the html into components.</li>
<li>Build the components as a hierarchy tree. Something like this:</li>
</ol>

<p style="text-align:center;">
    <img src="/assets/article_images/2015-05-21-be-ready-for-angular2-today/app_structure.png" alt="">
</p>

<p></p>

<h3>Step 1 - breaking the code into components</h3>

<p>We will want to build several components:</p>

<ul>
<li>Application main component (this will be used for the parent component in the hierarchy)</li>
<li>Search component</li>
<li>List component</li>
<li>List item component </li>
<li>Catalog details component </li>
</ul>

<p>I will omit the last two components from my example, just in order to keep things simple.</p>

<h3>Step 2 - Creating a hierarchy tree</h3>

<!--- >There are several great posts showing how to do it using directive's transclude property (see [here](https://www.airpair.com/angularjs/posts/creating-container-components-part-2-angular-1-directives) and [here](https://www.airpair.com/angularjs/posts/component-based-angularjs-directives)). While this is possible, it has several disadvantages: It uses scope and controllers and I think that it is too complicated.  

I will try to do it using a simpler approach, similar to what is done in Facebook's [React](https://facebook.github.io/react/).
-->

<p>Angular 2.0 uses an approach similar to Facebook&#39;s <a href="https://facebook.github.io/react/">React&#39;s</a> approach, and this is the tricky part. The main issue here is to correctly pass data/state between components, with minimum usage of scope or controllers (as you probably heard, Angular 2.x does not have scope or controllers...). </p>

<p>Let&#39;s call it &#39;The React way&#39;...</p>

<h5>The &#39;React way&#39;</h5>

<p>React.js uses state and props to manage its data. Props are immutable and are passed from parent to child. They are owned by the parent and they cannot be changed by the component. State, on the other hand, is private and mutable (it can be changed by the component). For child-parent communication it uses simple events, in order to invoke methods on the parent.</p>

<blockquote>
<p>For more reference see those two awesome tutorials: <a href="https://facebook.github.io/react/docs/thinking-in-react.html">thinking in react</a> and <a href="https://facebook.github.io/react/docs/tutorial.html">React&#39;s officail tuturial</a></p>
</blockquote>

<p>We will now have a main <code>phonecat-component</code> which will hold a <code>phonecat-search</code> and a <code>phonecat-list</code> child components. Those two child components will get all the data they need from their parent, via attributes.
It should look somehting like this (The complete example can be found in the following <a href="http://plnkr.co/edit/wL1yMlMTgxiuwyDIA3a5?p=preview">plunker</a>):</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- body --&gt;</span>
<span class="nt">&lt;body</span> <span class="na">ng-controller=</span><span class="s">&quot;PhoneListCtrl as phoneCtrl&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;phonecat-component</span> <span class="na">phones=</span><span class="s">phoneCtrl.phones</span><span class="nt">&gt;&lt;/phonecat-component&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--phonecat-component template--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container-fluid&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-2&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;phonecat-search</span> <span class="na">search=</span><span class="s">&quot;vm.search(searchData)&quot;</span><span class="nt">&gt;&lt;/phonecat-search&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-10&quot;</span><span class="nt">&gt;</span>
      &#39;<span class="nt">&lt;phonecat-list</span> <span class="na">phones=</span><span class="s">&quot;vm.phones&quot;</span> <span class="na">filter-data=</span><span class="s">&quot;vm.filterData&quot;</span><span class="nt">&gt;&lt;/phonecat-list&gt;</span>&#39;,    
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p></p>

<p>As you can see, our body contains only one main component &#39;phonecat-component&#39;. Its directive is:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;phonecatApp&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;phonecatComponent&#39;</span><span class="p">,</span> <span class="nx">phonecatComponent</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">phonecatComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">scope</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">bindToController</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">phones</span><span class="o">:</span> <span class="s2">&quot;=&quot;</span>
    <span class="p">},</span>
    <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">elm</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">ctrl</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ctrl</span><span class="p">.</span><span class="nx">filterData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">orderBy</span><span class="o">:</span> <span class="s1">&#39;name&#39;</span>
      <span class="p">};</span> <span class="c1">//default search filter</span>
      <span class="nx">ctrl</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">searchData</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctrl</span><span class="p">.</span><span class="nx">filterData</span> <span class="o">=</span> <span class="nx">searchData</span><span class="p">;</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
    <span class="nx">controllerAs</span><span class="o">:</span> <span class="s1">&#39;vm&#39;</span><span class="p">,</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/phonecatComponent.tpl.html&#39;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p></p>

<p>There are several points to stop and discuss here:</p>

<ul>
<li>&#39;phonecat-list&#39; child componenet receives its data using &#39;phones&#39; and &#39;filter-data&#39; attributes.<br></li>
<li>&#39;Search&#39; method is used to receive events from child &#39;phonecat-search&#39; component.</li>
<li>We use &#39;bindToController&#39; to pass &#39;phones&#39;, via attribute, to the &#39;phonecat-component&#39;. This feature was introduced in Angular 1.4, but no worry, you can acheive the same results with older Angular versions as well (see snippet below for more details). I will use this technique with other components, as well. </li>
</ul>

<blockquote>
<p>For more information about <code>bindToController</code> you can read this great <a href="http://blog.thoughtram.io/angularjs/2015/01/02/exploring-angular-1.3-bindToController.html">post</a>. 
TL;DR: you can replace this with regular isolated scope, if you want to use older Angular versions.</p>
</blockquote>

<p></p>

<p>Now, let&#39;s take a look at <code>phonecat-search</code> component&#39;s directive:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;phonecatApp&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;phonecatSearch&#39;</span><span class="p">,</span> <span class="nx">phonecatSearch</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">phonecatSearch</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">scope</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">bindToController</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">search</span><span class="o">:</span> <span class="s2">&quot;&amp;&quot;</span>
    <span class="p">},</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
    <span class="nx">controllerAs</span><span class="o">:</span> <span class="s1">&#39;vm&#39;</span><span class="p">,</span>
    <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">elm</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">ctrl</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">inputText</span> <span class="o">=</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
      <span class="kd">var</span> <span class="nx">selectedFilter</span> <span class="o">=</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;select&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

      <span class="nx">elm</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;keyup change&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">searchData</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">text</span><span class="o">:</span> <span class="nx">inputText</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
          <span class="nx">orderBy</span><span class="o">:</span> <span class="nx">selectedFilter</span><span class="p">[</span><span class="nx">selectedFilter</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">].</span><span class="nx">value</span>
        <span class="p">};</span>
        <span class="nx">ctrl</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span>
          <span class="nx">searchData</span><span class="o">:</span> <span class="nx">searchData</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">},</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/phonecatSearch.tpl.html&#39;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p></p>

<p>The interesting point here is that instead of using <code>ng-model</code>, I am using a <code>search</code> method (with <code>search: &quot;&amp;&quot;</code>), in order to communicate search events to the parent component.</p>

<p>And for <code>phonecat-list</code> component&#39;s directive:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;phonecatApp&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;phonecatList&#39;</span><span class="p">,</span> <span class="nx">phonecatList</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">phonecatList</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">scope</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">bindToController</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">phones</span><span class="o">:</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span>
      <span class="nx">filterData</span><span class="o">:</span> <span class="s2">&quot;=&quot;</span>
    <span class="p">},</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
    <span class="nx">controllerAs</span><span class="o">:</span> <span class="s1">&#39;vm&#39;</span><span class="p">,</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/phonecatList.tpl.html&#39;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p></p>

<p>As you can see, same pattern applies here: data passed to child component using attributes, <code>phones</code> and <code>filterData</code>.</p>

<p>To sum it up - we are now much closer to Angular 2&#39;s component structure, as seen <a href="http://victorsavkin.com/post/118372404541/the-core-concepts-of-angular-2">here</a>. You can see the whole thing in action in this <a href="http://plnkr.co/edit/wL1yMlMTgxiuwyDIA3a5?p=preview">plunker</a>.</p>

<p>Stay tuned to the other two parts:</p>

<ul>
<li>Write Angular 1.x in ES6/Typescript</li>
<li>Use the &quot;new router&quot;</li>
</ul>

          <div id="disqus_thread"></div>
        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Be+ready+for+Angular+2+Today+-+part+1&amp;url=http://yanivefraim.github.io//2015/05/27/be-ready-for-angular2-today-part1"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
                <a class="icon-facebook" href="https://www.facebook.com/sharer.php?t=Be+ready+for+Angular+2+Today+-+part+1&amp;u=http://yanivefraim.github.io//2015/05/27/be-ready-for-angular2-today-part1"
                  onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Yaniv Efraim</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2015-05-27 17:34">27 May 2015</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Yaniv Efraim</a> &copy; 2015<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/cA4aKEIPQrerBnp1yGHv_IMG_9534-3-2.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Advanced Front End topics</h1>
        <h2 class="blog-description"></h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>


    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        var disqus_shortname = 'fedsmemoirs';
        
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-63463267-1', 'auto');
        ga('send', 'pageview');
    </script>

  </body>
</html>
